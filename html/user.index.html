<tal:block metal:use-macro="templates/page/macros/icing">
<tal:block metal:fill-slot="create_or_query">
 <tal:block 
  metal:use-macro="templates/page/macros/create_or_query_new_tracker_item" />
</tal:block>

<tal:block metal:fill-slot="content">
 <tal:block tal:define=
  "batch request/batch;
   pdict python: utils.properties_dict (db, context);
   l python:
    ( ('id',                                   {})
    , ('lastname',                             {})
    , ('firstname',                            {})
    , ('realname',                             {})
    , ('nickname',                             {})
    , ('aux_username',                         {})
    , ('username',                             {})
    , ('address',                              {})
    , ('status',           dict (multiselect = 1))
    , ('room',             dict (multiselect = 1))
    , ('supervisor',       dict (multiselect = 1))
    , ('substitute',       dict (multiselect = 1))
    , ('subst_active',                         {})
    , ('position',         dict (multiselect = 1))
    , ('sex',              dict (multiselect = 1))
    , ('clearance_by',     dict (multiselect = 1))
    , ('timetracking_by',  dict (multiselect = 1))
    , ('title',                                {})
    , ('roles',                                {})
    , ('timezone',                             {})
    , ('csv_delimiter',                        {})
    , ('hide_message_files',                   {})
    , ('lunch_start',                          {})
    , ('lunch_duration',                       {})
    , ('tt_lines',                             {})
    , ('group',            dict (multiselect = 1))
    , ('secondary_groups', dict (multiselect = 1))
    , ('uid',                                  {})
    , ('home_directory',                       {})
    , ('login_shell',                          {})
    , ('samba_home_drive',                     {})
    , ('samba_home_path',                      {})
    , ('samba_kickoff_time',                   {})
    , ('samba_logon_script',                   {})
    , ('samba_lm_password',                    {})
    , ('samba_nt_password',                    {})
    , ('user_password',                        {})
    , ('samba_profile_path',                   {})
    , ('samba_pwd_can_change',                 {})
    , ('samba_pwd_last_set',                   {})
    , ('samba_pwd_must_change',                {})
    , ('shadow_expire',                        {})
    , ('shadow_inactive',                      {})
    , ('shadow_last_change',                   {})
    , ('shadow_max',                           {})
    , ('shadow_min',                           {})
    , ('shadow_used',                          {})
    , ('shadow_warning',                       {})
    , ('activity',                             {})
    , ('guid',                                 {})
    , ('org_location',     dict (multiselect = 1))
    , ('want_no_messages',                     {})
    );
   props python:
    [utils.ExtProperty (utils, pdict [k [0]], ** (k [1])) for k in l
     if k [0] in pdict and utils.search_allowed (db, request, 'user', k [0])
    ]
   "
  tal:condition="context/is_view_ok">

  <tal:block metal:use-macro="templates/page/macros/search_results"/>
  <tal:block metal:use-macro="templates/page/macros/simple_search_form"/>
 </tal:block>
</tal:block>
</tal:block>
