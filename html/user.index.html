<tal:block metal:use-macro="templates/page/macros/icing">
<tal:block metal:fill-slot="create_or_query">
 <tal:block 
  metal:use-macro="templates/page/macros/create_or_query_new_tracker_item" />
</tal:block>

<tal:block metal:fill-slot="content">
 <tal:block tal:define=
  "batch request/batch;
   pdict python: utils.properties_dict (db, context);
   l python:
    ( ('id',                                   {})
    , ('lastname',                             {})
    , ('firstname',                            {})
    , ('realname',                             {})
    , ('nickname',                             {})
    , ('aux_username',                         {})
    , ('username',                             {})
    , ('ad_domain',                            {})
    , ('address',                              {})
    , ('status',           dict (multiselect = 1))
    , ('room',             dict (multiselect = 1))
    , ('supervisor',       dict (multiselect = 1))
    , ('substitute',       dict (multiselect = 1))
    , ('subst_active',                         {})
    , ('position_text',                        {})
    , ('department_temp',                      {})
    , ('scale_seniority',                      {})
    , ( 'planning_role'
      , dict (searchable = False, sortable = False)
      )
    , ( 'planning_role'
      , dict
          ( searchname  = 'planning_role.functional_role'
          , searchable  = True
          , sortable    = True
          , multiselect = True
          )
      )
    , ('entry_date',                           {})
    , ('sex',              dict (multiselect = 1))
    , ('clearance_by',     dict (multiselect = 1))
    , ('timetracking_by',  dict (multiselect = 1))
    , ('vie_user_text',                        {})
    , ('sync_foreign_key',                     {})
    , ('title',                                {})
    , ('roles',                                {})
    , ('timezone',                             {})
    , ('csv_delimiter',                        {})
    , ('hide_message_files',                   {})
    , ('lunch_start',                          {})
    , ('lunch_duration',                       {})
    , ('tt_lines',                             {})
    , ('activity',                             {})
    , ('guid',                                 {})
    , ('want_no_messages',                     {})
    );
   props python:
    [utils.ExtProperty (utils, pdict [k [0]], ** (k [1])) for k in l
     if k [0] in pdict and utils.search_allowed (db, request, 'user', k [0])
    ]
   "
  tal:condition="context/is_view_ok">

  <tal:block metal:use-macro="templates/page/macros/search_results"/>
  <tal:block metal:use-macro="templates/page/macros/simple_search_form"/>
 </tal:block>
</tal:block>
</tal:block>
